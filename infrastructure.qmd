## Internal Infrastructure & Testing

### File and Directory Organization

-   Course materials and templates are stored in `inst/courses/`, organized by course (e.g., `mc451`, `mc501`).
-   Example datasets are located in `inst/extdata/simpsons/` as CSV files, accessible via `system.file()`.
-   Utility scripts (e.g., for filename normalization) are in `tools/`.
-   The package includes a script (`scripts/update-chapters.R`) to keep Quarto book chapters in sync with source files.

### Automated Testing

-   The package uses the `testthat` framework for automated testing of all major user-facing functions, ensuring reliability and correctness.
-   Tests cover downloading journals and weeks, listing available materials, and edge cases for empty or missing content.

### Internal Validation and Helpers

-   Internal functions validate the presence and structure of course/week templates, and check for required files.
-   Startup and setup helpers ensure that dependencies (Quarto, TinyTeX, Rtools) are available and provide user guidance if not.
-   These internal tools are not exported but are essential for package robustness and future extensibility.

### mccoursepack: A Course Companion Package

**Version:** 01.04.01

**Author:** Dr. Alex P. Leith [aleith\@siue.edu](mailto:aleith@siue.edu)

**License:** MIT

**Repository:** `https://github.com/sim-lab-siue/mccoursepack/`

### Description 

The `mccoursepack` package provides a seamless and user-friendly R/RStudio environment for students in **MC451** and **MC501** at SIUE. üéì Its primary goal is to abstract away the complexities of software setup and file management, allowing you to focus on learning data analysis concepts.

The package automates the installation of necessary tools (like Quarto and LaTeX), provides easy access to weekly course materials and journals, and includes self-check and update functions to ensure your environment remains consistent and functional throughout the course.

## Getting Started: A Typical Workflow

For a new student, the workflow is straightforward:

1.  **Initial Setup**: Run `mccourse_setup()` once to install all required software and R packages.
2.  **Check Your System**: Run `mccourse_self_test()` to verify that everything is installed correctly.
3.  **Find Your Materials**: Use `list_courses()` and `list_weeks()` to see available materials for your course.
4.  **Download Your Work**: Run `download_week()` or `download_journal()` to copy the template files to your computer.
5.  **Open and Work**: Use `open_week()` to quickly open the folder and start working on your Quarto (`.qmd`) files.
6.  **Stay Updated**: Periodically run `mccourse_update()` to get the latest version of the package and course materials.

------------------------------------------------------------------------

## Main Functions

This section details the primary functions you will interact with.

### Environment Setup & Verification

#### `mccourse_setup()`

Performs a one-time, automated setup of your system. It's safe to re-run this function at any time if something isn't working correctly.

-   **What it does:**
    -   Installs the **Quarto CLI** for rendering documents.
    -   Installs **TinyTeX**, a lightweight LaTeX distribution for creating PDFs.
    -   Installs essential R packages (`fs`, `rlang`, `cli`, `rstudioapi`).
    -   On Windows, it checks for Rtools and provides installation guidance if it's missing.
-   **Usage:** `r     mccourse_setup()`

#### `mccourse_self_test()`

Runs a series of diagnostic checks to ensure the package and its dependencies are correctly installed and configured. ü©∫

-   **What it does:**
    -   Checks for the correct versions of **R** and **RStudio**.
    -   Verifies that **Git** and **Quarto** are installed and accessible.
    -   Confirms that the course templates (`mc451`, `mc501`) are discoverable.
    -   Reports the results in a clean, easy-to-read table.
-   **Usage:** `r     mccourse_self_test()`

### Listing & Downloading Course Materials

#### `list_courses()`

Lists the courses bundled within the package.

-   **Usage:** `r     list_courses()     # [1] "mc451" "mc501"`

#### `list_weeks()`

Lists the available weekly material templates for a specific course.

-   **Arguments:**
    -   `course`: A string specifying the course name (e.g., `"mc451"`).
-   **Usage:** `r     # List weeks for MC451     list_weeks(course = "mc451")`

#### `download_week()`

Copies the material for a specific week from your course into a local directory on your computer. üìÅ

-   **Arguments:**
    -   `course`: The name of the course (e.g., `"mc451"`).
    -   `week`: The week number (e.g., `1` or `"01"`).
    -   `destdir` (Optional): The destination directory. Defaults to your current working directory.
-   **Usage:** `r     # Download week 1 materials for the MC451 course     download_week(course = "mc451", week = 1)`

#### `download_journal()`

Copies the course-long journal template to a local directory.

-   **Arguments:**
    -   `course`: The name of your course.
    -   `destdir` (Optional): The destination directory. Defaults to your current working directory.
-   **Usage:** `r     download_journal(course = "mc451")`

### Utility Functions

#### `open_week()`

A convenient helper to open a downloaded week's folder in your system's file browser (e.g., Finder on macOS, File Explorer on Windows).

-   **Arguments:**
    -   `week`: The week number you want to open.
    -   `destdir` (Optional): The parent directory where the week folder is located.
-   **Usage:** `r     # After downloading week 1, open its folder     open_week(1)`

#### `mccourse_update()`

Checks for and installs the latest version of the `mccoursepack` package from GitHub.

-   **Usage:** `r     mccourse_update()`

------------------------------------------------------------------------

## Included Datasets

This package includes several datasets related to *The Simpsons* for use in examples and assignments. üç©

-   **Available Datasets:** `simpsons_characters.csv`, `simpsons_episodes.csv`, `simpsons_locations.csv`, `simpsons_script_lines.csv`.

-   **How to Access:** The files are bundled within the package. To get the full path to a file, you can use the `system.file()` function. This is the most reliable way to load the data.

-   **Usage Example:**

    ``` r
    # Get the full path to the characters dataset
    char_path <- system.file("extdata/simpsons/simpsons_characters.csv", package = "mccoursepack")

    # Read the data using readr (part of the tidyverse)
    library(readr)
    simpsons_characters <- read_csv(char_path)

    # View the first few rows
    head(simpsons_characters)
    ```

------------------------------------------------------------------------

## Suggested Missing Features for Future Versions

This package provides an excellent foundation. Here is a comprehensive list of features that would enhance its utility for both students and instructors.

### For the Student Experience (QoL) ‚ú®

1.  **Interactive Material Downloader**: An interactive function like `mccourse_get_materials()` that presents menus to choose the course and week, reducing the need for students to remember the specific function names and arguments.
2.  **Week Reset Function**: A `reset_week(course, week)` function that allows a student to re-download a clean copy of a week's materials, asking for confirmation before overwriting their existing work.
3.  **Assignment Bundler**: A `bundle_assignment(week)` function that automatically finds the required files (e.g., `.qmd`, `.html`), zips them into a properly named file (e.g., `Leith_Alex_Week01.zip`), and saves it to their desktop, ready for submission.
4.  **Data Helper Function**: A `load_data(name)` function to simplify access to the included Simpsons datasets (e.g., `load_data("characters")` would load and return the `simpsons_characters` tibble directly).
5.  **RStudio Project Integration**: Modify `download_week()` to create a self-contained RStudio Project (`.Rproj` file) inside each weekly folder to encourage best practices for working directories.

### For the Instructor/Developer üõ†Ô∏è

1.  **Course Creation Scaffold**: Formalize the internal scripts into exported functions (`create_course()`, `add_week_template()`) to make it easy for other instructors to create new courses using this package's structure.
2.  **Comprehensive Course Validator**: An exported `validate_course(course)` function that iterates through all weeks, checking for required files and valid filenames, providing a complete report for a course author.
3.  **Configuration System**: A system (e.g., using a YAML file or R options) for instructors to configure package-wide settings, such as a URL for a help forum or course syllabus.
4.  **Help Function**: A `mccourse_help()` function that opens a URL to the course syllabus or a documentation website.

### General Package Enhancements ‚öôÔ∏è

1.  **More Granular Dependency Checks**: In `mccourse_self_test()`, add checks for specific versions of key packages used in the course (e.g., `tidyverse`, `ggplot2`) to prevent version-related issues.
2.  **Improved Error Handling**: Implement "fuzzy" matching for course and week names. If a user types `download_week("mc 451", week = 1)`, the function could suggest `"mc451"`.