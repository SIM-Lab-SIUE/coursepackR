---
title: "Lab 14: Inferential Statistics"
author: "Research Methods"
format: pdf
editor: visual
---

# **Lab 14: Inferential Statistics**

## **Learning Objectives**

In the last two labs, you have wrangled and visualized your data.

-   In **Lab 12**, you created new variables (like `platform_count`).
-   In **Lab 13**, you *described* those variables using plots. You *saw* what looked like differences between groups.

This week, we make the **leap from description to inference**. As the reading explains, we are moving from "what we see" in our **sample** to making an educated, statistical claim about the larger **population**. We will ask: "Is the difference I see in my plot *real*, or could it just be due to random chance?"

By the end of this lab, you will be able to:

-   Define a **Null Hypothesis (H0)** and an **Alternative Hypothesis (HA)**.
-   Understand and interpret a **p-value** (and the `p < .05` rule).
-   Run and interpret a **Chi-Square Test** (`chisq.test()`) for categorical relationships.
-   Run and interpret a **T-Test** (`t.test()`) to compare two group means.
-   Run and interpret an **ANOVA** (`aov()`) to compare three or more group means.
-   Run and interpret a **Linear Regression** (`lm()`) to predict outcomes.

### **Pew Research Center: Required Citation**

As always, any script, report, or presentation that uses this data must include the following disclaimer:

> "Pew Research Center bears no responsibility for the analyses or interpretations of the data presented here. The opinions expressed herein, including any implications for policy, are those of the author and not of Pew Research Center.”

------------------------------------------------------------------------

## **Part 1: Setup - Get Your Data Ready**

This lab **depends on your work from Lab 12**. We must first re-create the `w144_wrangled` dataset that contains all your new scales and variables.

**Run this entire chunk of code.**

```{r}
# 1. Load Libraries
library(tidyverse)
library(mccoursepack)

# 2. Load Raw Data
data(ATP_W144_excerpt)
df <- ATP_W144_excerpt

# 3. Wrangle Data (Rename, Recode, and Create Scales)
w144_wrangled <- df %>%
  # --- Rename Variables ---
  rename(
    party = F_PARTY_FINAL,
    age_cat = F_AGECAT,
    gender = F_GENDER,
    income = F_INC_SDT1,
    uses_facebook = SMUSE_a_W144,
    uses_x = SMUSE_c_W144,
    uses_instagram = SMUSE_d_W144,
    uses_tiktok = SMUSE_i_W144
  ) %>%
  # --- Recode & Create Scales ---
  mutate(
    # Recode Party
    party_simple = case_when(
        party == 1 ~ "Republican",
        party == 2 ~ "Democrat",
        TRUE ~ "Independent/Other"
    ),
    # Recode Gender (1=Man, 2=Woman)
    gender_label = case_when(
        gender == 1 ~ "Man",
        gender == 2 ~ "Woman",
        TRUE ~ "Non-binary/Other"
    ),
    # Recode Usage (1=Yes, 2=No)
    across(starts_with("uses_"), ~ if_else(. == 1, "Yes", "No")),
    # Create Platform Count (0-4)
    platform_count = (uses_facebook == "Yes") + (uses_x == "Yes") + 
                     (uses_instagram == "Yes") + (uses_tiktok == "Yes"),
    # Recode FB Reasons (1/2=Yes, 3=No) and Sum them
    fb_uses_count = rowSums(
        across(starts_with("FBWHY_"), ~ if_else(. %in% c(1, 2), 1, 0)), 
        na.rm = TRUE
    ),
    # Create readable labels for Age
    age_label = case_when(
        age_cat == 1 ~ "18-29",
        age_cat == 2 ~ "30-49",
        age_cat == 3 ~ "50-64",
        age_cat == 4 ~ "65+"
    )
  )

# 4. Check the Result
glimpse(w144_wrangled)
```

After running this, your **Environment** should contain the `w144_wrangled` object. We are now ready to test hypotheses.

-----

## **Part 2: What is Hypothesis Testing? (The 30-Second Version)**

In inferential statistics, we are always testing a **Null Hypothesis (H0)**.

  - **Null Hypothesis (H0):** The "boring" hypothesis. It states there is **no** relationship or **no** difference. (e.g., "There is no difference in platform use between men and women.")
  - **Alternative Hypothesis (HA):** The "interesting" hypothesis. It states that there *is* a relationship or difference.

We run a test to get a **p-value**.

  - **The Rule:** If **`p < .05`** (less than 5% probability), we **reject the Null Hypothesis (H0)**. We conclude that our finding is **statistically significant**.

-----

## **Part 3: Test 1 - The Chi-Square (χ²) Test**

**Use Case:** Testing for an **association** between two **categorical** variables.

  - **Research Question:** "Is there an association between Political Party and TikTok use?"
  - **H0 (Null):** There is **no association** (Variables are independent).
  - **HA (Alternative):** There *is* an association.

### **Step 1: Create a Crosstab**

```{r}
# Create a contingency table
party_tiktok_table <- table(w144_wrangled$party_simple, w144_wrangled$uses_tiktok)

print(party_tiktok_table)
```

### **Step 2: Run the Chi-Square Test**

```{r}
chisq.test(party_tiktok_table)
```

### **Step 3: Interpret the Result**

Look at the **p-value** in the output.

  * If p \< .05, we **reject H0**.
  * *Conclusion:* There IS a statistically significant association between political party and TikTok usage.

-----

## **Part 4: Test 2 - The T-Test**

**Use Case:** Comparing the **means** of **two groups**.

  - **Research Question:** "Who uses more social media platforms on average: Men or Women?"
  - **H0 (Null):** The means are equal (Difference = 0).
  - **HA (Alternative):** The means are different.

### **Step 1: Run the T-Test**

The syntax is `t.test(Numeric_Outcome ~ Categorical_Group)`.
*Note: We filter out "Non-binary/Other" just to compare the two main groups for this specific test.*

```{r}
# Filter for only Men and Women
gender_data <- w144_wrangled %>% 
  filter(gender_label %in% c("Man", "Woman"))

t.test(platform_count ~ gender_label, data = gender_data)
```

### **Step 2: Interpret the Result**

1.  **Check the Means:** Look at "mean in group Man" vs "mean in group Woman" at the bottom. Who is higher?
2.  **Check the P-Value:** Is it \< .05?
3.  **Conclusion:** If p \< .05, the difference between men and women is statistically significant.

-----

## **Part 5: Test 3 - ANOVA**

**Use Case:** Comparing the **means** of **three or more groups**.

  - **Research Question:** "Is there a difference in social media usage across age groups?" (We have 4 age groups).
  - **H0 (Null):** All group means are equal.
  - **HA (Alternative):** At least one group is different.

### **Step 1: Run the ANOVA**

We use the `aov()` function.

```{r}
anova_model <- aov(platform_count ~ age_label, data = w144_wrangled)
summary(anova_model)
```

### **Step 2: Interpret the Result**

  * Look for the **`Pr(>F)`** column. This is your p-value.
  * If p \< .05, we know *some* difference exists. But we don't know *which* groups are different.

### **Step 3: Post-Hoc Test (Tukey)**

To find out *exactly which* groups differ, we run a "Post-Hoc" (after the fact) test.

```{r}
TukeyHSD(anova_model)
```

  * **Interpretation:** Look at the `p adj` column for each pair (e.g., `65+-18-29`).
  * If `p adj < .05`, those two specific groups are significantly different.

-----

## **Part 6: Regression Analysis**

**Use Case:** Predicting a **numeric outcome** based on one or more predictors.

### **A. Simple Linear Regression**

  - **Research Question:** Does the number of reasons a person uses Facebook (`fb_uses_count`) predict their total social media usage (`platform_count`)?

<!-- end list -->

```{r}
# Fit the model
lm_simple <- lm(platform_count ~ fb_uses_count, data = w144_wrangled)

# View summary
summary(lm_simple)
```

**Interpretation:**

  * **Estimate (Slope):** If this is positive, more FB reasons = more platforms used.
  * **Pr(\>|t|) (P-value):** If \< .05, the relationship is significant.
  * **Multiple R-squared:** This tells you how much of the variance is explained by your model (e.g., 0.25 = 25%).

### **B. Multiple Linear Regression**

We can add more variables (like Age and Party) to control for them.

```{r}
# Fit the model with multiple predictors
lm_multi <- lm(platform_count ~ fb_uses_count + age_label + party_simple, data = w144_wrangled)

summary(lm_multi)
```

**Interpretation:**

  * This tells us the effect of `fb_uses_count` *while holding age and party constant*.
  * Check the p-values for each predictor to see which ones matter most.
