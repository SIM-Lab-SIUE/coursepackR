title: "Week 9 Lab: Importing and Joining Data"

## Week 9: Importing and Joining Data (with a Qualtrics Focus)

-   **Textbook Chapter:** 9: Survey Research\
-   **Dataset:** `ATP_W144_excerpt` (from the `mccoursepack` package)\
-   **Core Functions/Packages:** `dplyr::left_join()`, `dplyr::mutate()`, `dplyr::case_when()`, `tidyverse`

### Note

This week will include a Qualtrics demonstration. We will also practice joining and transforming data in R using real survey data from Pew Research Center (ATP W144).

### Lab Activities

1.  **Load the Data**
        -   Load the Pew dataset using: 
            ```r
            library(mccoursepack)
            library(tidyverse)
            data(ATP_W144_excerpt)
            df <- ATP_W144_excerpt
            glimpse(df)
            ```
2.  **Create a New Data Frame**
        -   Suppose you want to join a new variable to this data. Create a small data frame with region info using the region codes in the dataset:
            ```r
            region_lookup <- tibble(
                F_REG = c(1, 2, 3, 4),
                region = c("Northeast", "Midwest", "South", "West")
            )
            ```
3.  **Join the Data**
        -   Use `left_join()` to add the region info to the Pew data:
            ```r
            df_joined <- left_join(df, region_lookup, by = "F_REG")
            glimpse(df_joined)
            ```
        -   How many rows have a non-missing `region`? What does this tell you about the join?
4.  **Explore and Summarize**
        -   Use `count(df_joined, region)` to see the number of respondents by region (including NAs).
        -   Try creating a new variable, e.g.,
            ```r
            df_joined <- df_joined %>% mutate(is_young = F_AGECAT == 1) # 1 = youngest group, adjust as needed
            ```
        -   Summarize the average of a numeric variable by region (where available), e.g.:
            ```r
            df_joined %>% group_by(region) %>% summarize(mean_intfreq = mean(F_INTFREQ, na.rm = TRUE))
            ```
5.  **Discussion**
    -   Why are unique IDs or keys important for joining tables?
    -   How does this relate to survey research and Qualtrics data merges?

------------------------------------------------------------------------

*All code should use tidyverse functions where possible. Avoid base R unless necessary.*