# **Lab 13: Descriptive Statistics & Data Visualization**

## **Learning Objectives**

In Lab 12, you did the hard work of "wrangling"‚Äîyou created new, meaningful variables like `party_simple` and `platform_count`. But data wrangling is just the prep work. This week, we learn how to **explore** that data.

This is the "fun" part. Data visualization allows you to *see* patterns, find relationships, and get a feel for your data before you ever run a formal statistical test.

By the end of this lab, you will be able to:

-   Get quick descriptive statistics using `summary()` and `count()`.
-   Understand the basic "grammar" of the `ggplot2` package.
-   Create **histograms** to see the distribution of numeric variables.
-   Create **bar charts** to see the distribution of categorical variables.
-   Create **boxplots** and **violin plots** to compare groups.
-   Create **filled bar charts** to compare proportions.
-   Polish your plots with labels and titles using `labs()`.
-   Use `facet_wrap()` to create powerful "small multiple" plots.

### **Pew Research Center: Required Citation**

As always, any script, report, or presentation that uses this data must include the following disclaimer:

> "Pew Research Center bears no responsibility for the analyses or interpretations of the data presented here. The opinions expressed herein, including any implications for policy, are those of the author and not of Pew Research Center.‚Äù

------------------------------------------------------------------------

## **Part 1: Setup - Get Your Data Ready**

This lab **depends on your work from Lab 12**. We must first re-create the `w144_wrangled` dataset that contains all your new scales and variables.

1.  Open RStudio and create a **new R Script**.
2.  Save it in your Project folder as `Lab_13.R`.
3.  Load the `tidyverse` library.

### **Step 1: The "Wrangle Chunk" üß±**

Copy this *entire* block of code from Lab 12. This is your "wrangle chunk" that takes the raw `w144_teaching_dataset_v2.csv` and creates your final `w144_wrangled` object.

**Run this entire chunk of code.**

```{r}
library(tidyverse)

data_path <- system.file("extdata", "w144_teaching_dataset_v2.csv", package = "mccoursepack")

w144_data <- read_csv(data_path)

glimpse(w144_data)

w144_wrangled <- w144_data %>% 
    ) %>% 
      factor(levels = c("Republican", "Democrat", "Independent/Other")),
    platform_count = (uses_facebook == "Yes") +
                     (uses_x == "Yes") +
                     (uses_tiktok == "Yes"),
    across(
      starts_with("fb_why_"), 
This lab **depends on your work from Lab 12**. We must first re-create the `pew_wrangled` dataset that contains all your new scales and variables, but now using the new Pew ATP dataset.
      ~ if_else(. == "Yes", 1, 0),
      .names = "{.col}_n" 
    )
  ) %>% 
  mutate(
    fb_uses_count = rowSums(
      across(starts_with("fb_why_") & ends_with("_n")), 
      na.rm = TRUE
    )
  )

glimpse(w144_wrangled)
```

-   **1. Load the tidyverse:** Loads the `tidyverse` library.
-   **2. Find Path:** `system.file()` is the standard way to find package files *inside* the 'mccoursepack' package.
-   **3. Load Data:** Loads the data from the full path.
-   **4. Glimpse:** Confirms the raw `w144_data` is loaded.
-   **5. Run Wrangling Steps:**
    -   (Inside first `mutate`): Create 'party_simple'
    -   (Inside first `mutate`): Create 'platform_count'
    -   (Inside first `mutate`): Recode 'fb_why' items to 1/0
    -   (Inside second `mutate`): Create 'fb_uses_count' scale
-   **6. Check Your Work:** Glimpse your final `w144_wrangled` object to make sure it's ready.

After running this, your **Environment** (top-right) should contain the `w144_wrangled` object. We are now ready to explore.

------------------------------------------------------------------------

## **Part 2: Descriptive Statistics (The "10,000-Foot View")**

Before we plot, let's get some quick numbers.

### **A) For `numeric` scales: `summary()`**

summary(w144_wrangled$fb_uses_count)
```

-   **Line 3:** Get a summary for your 'fb_uses_count' scale.
-   **Interpretation:** Look at the `Mean` (the average), the `Median` (the 50th percentile, or middle value), and the `Min.` and `Max.` values. This tells you the range and central tendency of your scale.

### **B) For `categorical` factors: `count()`**

The `count()` function is the best way to see the *frequencies* for categorical variables (like `party_simple`, `age_group`, or coded variables like `income`).

```{r}
w144_wrangled %>% 
  count(party_simple)

w144_wrangled %>% 
  count(age_group, sort = TRUE)

w144_wrangled %>%
  filter(!is.na(income), income != 99) %>%
  count(income, sort = TRUE)
```

-   **Lines 1-2:** Count the 'party_simple' variable you created.
-   **Lines 4-5:** Count the 'age_group' variable, sorted by size.
-   **Lines 7-9:** Count the 'income' variable, filtering out missing/refused (99), sorted by size.

------------------------------------------------------------------------

## **Part 3: The Grammar of Graphics (`ggplot2`)**

`summary()` and `count()` are great, but a *picture is worth a thousand numbers*. We will use the `ggplot2` package (which is part of the `tidyverse`) to make our plots.

All `ggplot` code follows the same "grammar":

1.  `ggplot(data = ... , aes(x = ... , y = ...))`
    -   **`data`:** Your dataset (we'll use `w144_wrangled`).
    -   **`aes()`:** The "aesthetics." This is where you map variables to visual properties, like `x` (the x-axis), `y` (the y-axis), and `fill` (the color).
2.  `+`
    -   The "plus" sign connects your setup to a...
3.  `geom_...()`
    -   The "geometry." This is the *type* of plot you want (bar chart, histogram, boxplot, etc.).

------------------------------------------------------------------------

## **Part 4: Plotting ONE Variable (Distributions)**

The first step in exploration is to understand the *shape* of your key variables.

### **A) Categorical Variable -\> `geom_bar()`**

**Question:** How many people are in each `party_simple` group? **Plot:** A bar chart.

```{r}
ggplot(data = w144_wrangled, aes(x = party_simple)) +
  geom_bar()
```

-   **1. Setup:** `data` is 'w144_wrangled', `x-axis` is 'party_simple'.
-   **2. Geometry:** Add a 'bar chart' layer.

**`ggplot()` Challenge:**

-   Create a new bar chart for the `education` variable. What does it tell you?
-   Create a bar chart for the `income` variable (filter out 99 = Refused):

```{r}
ggplot(data = w144_wrangled %>% filter(!is.na(income), income != 99), aes(x = factor(income))) +
  geom_bar()
```

-   **Interpretation:** For `income`, the x-axis shows category codes (see codebook for meaning). Which income group is most common?

### **B) Numeric Variable -\> `geom_histogram()`**

**Question:** What is the distribution of our `platform_count` scale? **Plot:** A histogram.

```{r}
ggplot(data = w144_wrangled, aes(x = platform_count)) +
  geom_histogram(binwidth = 1, fill = "blue", color = "white") 
```

-   **1. Setup:** `data` is 'w144_wrangled', `x-axis` is 'platform_count'.
-   **2. Geometry:** Add a 'histogram' layer.
-   `binwidth = 1` is important: it makes each bar 1 unit wide (0, 1, 2, 3, 4).
-   **`ggplot()` Challenge:** Run the code above. Now, create a new histogram for the `fb_uses_count` scale you built. What's the most common number of "reasons" people use Facebook?

------------------------------------------------------------------------

## **Part 5: Plotting TWO Variables (Relationships)**

This is where you hunt for insights! How does one variable change in relation to another?

### **A) Categorical (X) vs. Numeric (Y) -> `geom_violin()` or `geom_boxplot()`**

**Question:** Does `platform_count` (numeric) differ by `age_group` (categorical)? **Plot:** A violin plot (or boxplot). A violin plot is like a histogram for each group, turned on its side.

```{r}
ggplot(data = w144_wrangled, aes(x = age_group, y = platform_count)) +
  geom_violin() +
  stat_summary(fun = "mean", geom = "point", color = "red", size = 3)
```

-   **1. Setup:** `x-axis` is 'age_group', `y-axis` is 'platform_count'.
-   **2. Geometry:** Add a 'violin' layer.
-   **3. (Optional):** Add a point for the mean in each group using `stat_summary()`.
-   **Interpretation:** Look at the plot. You can instantly see that the distribution of platform use for "18-29" year-olds is *very* different from "65+" year-olds. This is a key finding!

**`ggplot()` Challenge:**

-   Create a violin plot of `fb_uses_count` by `age_group`:

```{r}
ggplot(data = w144_wrangled, aes(x = age_group, y = fb_uses_count)) +
  geom_violin() +
  stat_summary(fun = "mean", geom = "point", color = "red", size = 3)
```

-   **Interpretation:** For `fb_uses_count`, do some age groups report more reasons for Facebook use than others?

### **B) Categorical (X) vs. Categorical (Fill) -\> `geom_bar(position = "fill")`**

**Question:** What is the *proportion* of TikTok use (`uses_tiktok`) in each `age_group`? **Plot:** A 100% "filled" bar chart.

```{r}
ggplot(data = w144_wrangled, aes(x = age_group, fill = uses_tiktok)) +
  geom_bar(position = "fill") 
```

-   **1. Setup:** `x-axis` is 'age_group', 'fill' color is 'uses_tiktok'.
-   **2. Geometry:** A bar chart.
-   `position = "fill"` turns the stacked bars into a 100% proportional chart.
-   **Interpretation:** This plot clearly shows that `uses_tiktok` makes up a huge proportion of the "18-29" bar, but a tiny sliver of the "65+" bar.

**`ggplot()` Challenge:**

-   Create a filled bar chart of `uses_tiktok` by `income` (filter out 99 = Refused):

```{r}
ggplot(data = w144_wrangled %>% filter(!is.na(income), income != 99), aes(x = factor(income), fill = uses_tiktok)) +
  geom_bar(position = "fill")
```

-   **Interpretation:** For `income`, the x-axis shows category codes. In which income groups is TikTok use most or least common?

------------------------------------------------------------------------

## **Part 6: Polishing and Faceting (The "Power Moves")**

Your plots work, but now let's make them look professional and add more analytical power.

### **A) Polishing with `labs()`**

Let's take our violin plot from Part 5 and add clean labels. The `labs()` function lets you change all labels at once.

```{r}
ggplot(data = w144_wrangled, aes(x = age_group, y = platform_count)) +
  geom_violin() +
  stat_summary(fun = "mean", geom = "point", color = "red", size = 3) +
  labs(
    title = "Social Media Platform Use is Heavily Tied to Age",
    subtitle = "Distribution of platform count (out of 4) by age group",
    x = "Age Group",
    y = "Number of Platforms Used",
    caption = "Source: Pew Research Center, ATP W144"
  )
```

-   Add this `labs()` layer to make your plot report-ready.

### **B) Analyzing with `facet_wrap()`**

**This is the most powerful tool in exploratory analysis.** `facet_wrap()` creates a *separate plot* for each level of a categorical variable.

**Question:** We know the distribution of `fb_uses_count` (from Part 4). But does that distribution look *different* for Democrats, Republicans, and Independents?

```{r}
ggplot(data = w144_wrangled, aes(x = fb_uses_count)) +
  geom_histogram(binwidth = 1, fill = "navy", color = "white") +
  facet_wrap(~ party_simple) +
  labs(
    title = "Facebook 'Reasons for Use' by Political Party",
    x = "Number of Reasons Cited (out of 7)",
    y = "Count of Respondents"
  )
```

-   **1. Setup:** A basic histogram of 'fb_uses_count'.
-   **2. Geometry:** A histogram.
-   **3. The Power Move:** `facet_wrap(~ party_simple)` creates 3 separate histograms, one for each party.
-   **4. Polish it:** Add labels with `labs()`.
-   **Interpretation:** Look at the three plots. Do they look the same? Do you see any differences in the "shape" of the data for each group? This gives you a powerful hint about what you'll find in Week 14!